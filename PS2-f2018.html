<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Yoon Hong Park" />

<meta name="date" content="2018-10-30" />

<title>34600 Problem Set 2</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}

.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("section-TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Yoon's Archive</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="about.html">About me</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Program Evaluation (R/Stata)
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="pePS1.html">Mexican Universal Health Insurance (ITT/LATE)</a>
    </li>
    <li>
      <a href="PS2-f2018.html">Very Low Birth Weight (RDD)</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    GIS and Spatial Analysis (R)
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="mapping3-ChiTrauma.html">Chicago Trauma Center Service Area</a>
    </li>
    <li>
      <a href="mapping2-ILInc.html">Illinois Income Distribution</a>
    </li>
    <li>
      <a href="mapping1-ChiHIV.html">Chicago HIV Prevalence</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Policy Analysis (R)
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Rps4.html">Health Care Data</a>
    </li>
    <li>
      <a href="Rps3.html">Flight Data 2</a>
    </li>
    <li>
      <a href="Rps2.html">Flight Data 1</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Programming (Python)
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Scraping</li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="section-header">



<h1 class="title toc-ignore">34600 Problem Set 2</h1>
<h4 class="author"><em>Yoon Hong Park</em></h4>
<h4 class="date"><em>10/30/2018</em></h4>

</div>


<p><br> For this assignment, provide a write-‐up where you answer the questions below, selectively cutting and pasting output where needed1. Be concise in your write-‐up; excess wordiness will be penalized. Also, submit a log file that includes commands and results for your entire analysis. The assignment makes use of almond_etal_2008.dta, which you can find on Canvas.</p>
<p><br></p>
<div id="section-motivation" class="section level2">
<h2><strong>Motivation</strong></h2>
<p>A key policy question in health economics is whether the benefits of additional medical expenditures exceed their cost. The question is particularly relevant since medical expenditures in the United States have been on the rise for a long time. To analyze this question Almond et al (2008), use a RDD design and compare health outcomes of newborns around the threshold of very low birth weight (1500 grams). They argue that the threshold is commonly used as a rule of thumb to prescribe medical treatment, which is followed mainly by convention, and does not reflect biological criteria. In this problem set we will reproduce some of their basic results, so start by reading their paper, which you can find in Canvas.</p>
<p><br></p>
</div>
<div id="section-questions" class="section level2">
<h2><strong>Questions:</strong></h2>
<div id="section-set-up" class="section level3">
<h3><strong>Set-up</strong></h3>
<pre class="r"><code># Load libraries
library(tidyverse)
library(foreign)
library(readstata13)
library(haven)
library(labelled)
library(statar)
library(rdd)
library(stargazer)</code></pre>
<pre class="r"><code># Call the data
data &lt;- read_dta(&quot;almond_etal_2008.dta&quot;)
attr(data, &quot;var.labels&quot;)
head(data)</code></pre>
<p><br><br></p>
</div>
<div id="section-q1" class="section level3">
<h3><strong>Q1</strong></h3>
<p>Start by getting the descriptive statistics of birth weight in the sample, what is the mean, standard deviation, minimum, and maximum?</p>
<p><br></p>
<p><strong>Answer</strong> <br> The mean weight is 1511.576 grams; the standard deviation is 89.01614 grams; the minimum is 1350 grams; and the maximum is 1650 grams.</p>
<pre class="r"><code># Data rearranging
any(is.na(data$bweight))
## [1] FALSE
summary(data$bweight)
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    1350    1445    1515    1512    1588    1650
mean(data$bweight)
## [1] 1511.576
sd(data$bweight, na.rm = TRUE)
## [1] 89.01614</code></pre>
<p><br><br></p>
</div>
<div id="section-q2" class="section level3">
<h3><strong>Q2</strong></h3>
<p>Now plot one year and 28 day mortality rates against our running variable, birth weight. To do so, make bins of one ounce (28.35 grams) around the 1500 grams threshold, and get the mean mortality rate on each bin. Make a separate graph for each outcome. Describe the relationship between birth weight and mortality. Does it appear to be a discontinuity of mortality around the very low birth weight threshold? How does the number of observations in each bin affect your mean estimates?</p>
<p><br></p>
<p><strong>Answer</strong> <br> Both below and above the threshold, the birth weight and mortality have a negative relationship, which indicates that the mortality rate decreases when the birth weight increases. Yes, there seems to be a discrete jump between right below and right above the threshold. Then, the second set of codes adjusts the binwidth to increase and to decrease the number of observations in each bin. As the width gets broader, the number of observations in each bin gets larger, then the mean estimates form a smoother line, which does not show the jump between below/above the threshold. However, as the width gets narrower, the number of observations gets smaller, then the mean estimates would show more spikes of the general trend.</p>
<pre class="r"><code>head(data)</code></pre>
<pre><code>## # A tibble: 6 x 44
##     yob   yod staters mom_age mom_race mom_ed mom_ed1 mom_ed2 mom_ed3
##   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl+lb&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1  1983    NA       1      21 2            12       0       1       0
## 2  1983    NA       1      34 1            12       0       1       0
## 3  1983    NA      10      31 1            12       0       1       0
## 4  1983    NA       1      18 2            11       1       0       0
## 5  1983    NA       1      17 2             9       1       0       0
## 6  1983    NA       1      20 1             9       1       0       0
## # ... with 35 more variables: mom_ed4 &lt;dbl&gt;, mom_ed5 &lt;dbl&gt;, bweight &lt;dbl&gt;,
## #   gest &lt;dbl&gt;, gest_wks1 &lt;dbl&gt;, gest_wks2 &lt;dbl&gt;, gest_wks3 &lt;dbl&gt;,
## #   gest_wks4 &lt;dbl&gt;, agedth &lt;dbl+lbl&gt;, agedth1 &lt;dbl&gt;, agedth2 &lt;dbl&gt;,
## #   agedth3 &lt;dbl&gt;, agedth4 &lt;dbl&gt;, agedth5 &lt;dbl&gt;, nprenatal &lt;dbl&gt;,
## #   nprenatal_1 &lt;dbl&gt;, nprenatal_2 &lt;dbl&gt;, nprenatal_3 &lt;dbl&gt;,
## #   nprenatal_4 &lt;dbl&gt;, apgar5 &lt;dbl&gt;, apgar5_1 &lt;dbl&gt;, apgar5_3 &lt;dbl&gt;,
## #   apgar5_5 &lt;dbl&gt;, apgar5_7 &lt;dbl&gt;, stateoc &lt;dbl&gt;, dad_age &lt;dbl&gt;,
## #   dad_race &lt;dbl+lbl&gt;, sex &lt;dbl&gt;, plural &lt;dbl&gt;, mom_origin &lt;dbl&gt;,
## #   dad_origin &lt;dbl&gt;, tot_order &lt;dbl&gt;, live_order &lt;dbl&gt;, pldel &lt;dbl+lbl&gt;,
## #   attend &lt;dbl+lbl&gt;</code></pre>
<pre class="r"><code># Create bins starting from 1500 in both to the higher and the lower end.
bin.breaks.one.oz &lt;- 
  sort(c(seq(1500, 1300, -28.35), seq(1528.35, 1700, 28.35)))
bin.breaks.three.oz &lt;- 
  sort(c(seq(1500, 1300, -28.35*3), seq(1585.05, 1700, 28.35*3)))
bin.breaks.half.oz &lt;- 
  sort(c(seq(1500, 1300, -28.35*0.5), seq(1514.175, 1700, 28.35*0.5)))


# Create bins, calculatem mean per bin, and add mid points for plotting.
# One-ounce bin plot for one-year mortality rates (agedth5) 
data %&gt;%
  mutate(
    bins = cut(bweight,
               breaks = bin.breaks.one.oz, 
               right = FALSE, 
               dig.lab = 10)
  ) %&gt;%
  group_by(bins) %&gt;%
  summarise(
    binmean = mean(agedth5, na.rm = TRUE)
  ) %&gt;%
  mutate(
    binmids = hist(data$bweight, 
                   breaks = bin.breaks.one.oz, 
                   right = TRUE, 
                   plot = FALSE)$mids[2:13]
  ) %&gt;%
  ggplot() +
  geom_point(aes(x = binmids, y = binmean)) + 
  xlim(c(1350, 1650)) +
  geom_vline(aes(xintercept = 1500), color=&quot;black&quot;)</code></pre>
<pre><code>## Warning: Removed 2 rows containing missing values (geom_point).</code></pre>
<pre class="r"><code># One-ounce bin plot for 28-day mortality rates (agedth4)
data %&gt;%
  mutate(
    bins = cut(bweight, 
               breaks = bin.breaks.one.oz, 
               right = FALSE, 
               dig.lab = 10)
  ) %&gt;%
  group_by(bins) %&gt;%
  summarise(
    binmean = mean(agedth4, na.rm = TRUE)
  ) %&gt;%
  mutate(
    binmids = hist(data$bweight, 
                   breaks = bin.breaks.one.oz, 
                   right = TRUE, 
                   plot = FALSE)$mids[2:13]
  ) %&gt;%
  ggplot() +
  geom_point(aes(x = binmids, y = binmean)) + 
  xlim(c(1350, 1650)) +
  geom_vline(aes(xintercept = 1500), color=&quot;black&quot;)</code></pre>
<pre><code>## Warning: Removed 2 rows containing missing values (geom_point).</code></pre>
<p><img src="PS2-f2018_files/figure-html/unnamed-chunk-4-1.png" width="50%" /><img src="PS2-f2018_files/figure-html/unnamed-chunk-4-2.png" width="50%" /></p>
<pre class="r"><code># For exploring the number of observations by adjusting the binwidth.
# Three-ounce bin plot for one-year mortality rates (agedth5)
data %&gt;%
  mutate(
    bins = cut(bweight, 
               breaks = bin.breaks.three.oz, 
               right = FALSE, 
               dig.lab = 10)
  ) %&gt;%
  group_by(bins) %&gt;%
  summarise(
    binmean = mean(agedth5, na.rm = TRUE)
  ) %&gt;%
  mutate(
    binmids = hist(data$bweight, 
                   breaks = bin.breaks.three.oz, 
                   right = TRUE, 
                   plot = FALSE)$mids
  ) %&gt;%
  ggplot() +
  geom_point(aes(x = binmids, y = binmean)) + 
  xlim(c(1350, 1650)) +
  geom_vline(aes(xintercept = 1500), color=&quot;black&quot;)


# Three-ounce bin plot for 28-day mortality rates (agedth4)
data %&gt;%
  mutate(
    bins = cut(bweight, 
               breaks = bin.breaks.three.oz, 
               right = FALSE, 
               dig.lab = 10)
  ) %&gt;%
  group_by(bins) %&gt;%
  summarise(
    binmean = mean(agedth4, na.rm = TRUE)
  ) %&gt;%
  mutate(
    binmids = hist(data$bweight, 
                   breaks = bin.breaks.three.oz, 
                   right = TRUE, 
                   plot = FALSE)$mids
  ) %&gt;%
  ggplot() +
    geom_point(aes(x = binmids, y = binmean)) + 
    xlim(c(1350, 1650)) +
    geom_vline(aes(xintercept = 1500), color=&quot;black&quot;)


# Half-ounce bin plot for one-year mortality rates (agedth5)
data %&gt;%
  mutate(
    bins = cut(bweight, 
               breaks = bin.breaks.half.oz, 
               right = FALSE, 
               dig.lab = 10)
  ) %&gt;%
  group_by(bins) %&gt;%
  summarise(
    binmean = mean(agedth5, na.rm = TRUE)
  ) %&gt;%
  mutate(
    binmids = hist(data$bweight, 
                   breaks = bin.breaks.half.oz, 
                   right = TRUE, 
                   plot = FALSE)$mids[4:25]
  ) %&gt;%
  ggplot() +
    geom_point(aes(x = binmids, y = binmean)) + 
    xlim(c(1350, 1650)) +
    geom_vline(aes(xintercept = 1500), color=&quot;black&quot;)


# Three-ounce bin plot for 28-day mortality rates (agedth4)
data %&gt;%
  mutate(
    bins = cut(bweight, 
               breaks = bin.breaks.half.oz, 
               right = FALSE, 
               dig.lab = 10)
  ) %&gt;%
  group_by(bins) %&gt;%
  summarise(
    binmean = mean(agedth4, na.rm = TRUE)
  ) %&gt;%
  mutate(
    binmids = hist(data$bweight, 
                   breaks = bin.breaks.half.oz, 
                   right = TRUE, 
                   plot = FALSE)$mids[4:25]
  ) %&gt;%
  ggplot() +
  geom_point(aes(x = binmids, y = binmean)) + 
  xlim(c(1350, 1650)) +
  geom_vline(aes(xintercept = 1500), color=&quot;black&quot;)</code></pre>
<p><img src="PS2-f2018_files/figure-html/unnamed-chunk-5-1.png" width="50%" /><img src="PS2-f2018_files/figure-html/unnamed-chunk-5-2.png" width="50%" /><img src="PS2-f2018_files/figure-html/unnamed-chunk-5-3.png" width="50%" /><img src="PS2-f2018_files/figure-html/unnamed-chunk-5-4.png" width="50%" /></p>
<p><br><br></p>
</div>
<div id="section-q3" class="section level3">
<h3><strong>Q3</strong></h3>
<p>A key assumption for an RDD to provide a causal estimate is that individuals are not able to sort according to the running variable, i.e., they should not be able to manipulate its value. Discuss in your own words whether this is a reasonable assumption in this case.</p>
<p><br></p>
<p><strong>Answer</strong> <br> To check if this is a reasonable assumption, we need to think about two potential cases: mothers manipulating the birth weight by giving births earlier and doctors misreporting the birth weight systematically. First of all, Almond and his colleagues’ conversations with physicians suggest that it is impossible to predict the birth weight before giving births, which rejects the first potential case. Also, the histogram below suggests that the distribution of frequency of birth weights around 1500g are similar to that around 1400g and 1600g, suggesting that the doctors would not systematically manipulate the birthweight in order to gain more reimbursements or other benefits.</p>
<pre class="r"><code>ggplot(data, aes(x = bweight)) +
  geom_histogram(binwidth = 2.835)</code></pre>
<p><img src="PS2-f2018_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<pre class="r"><code>manip.test &lt;- data %&gt;%
  mutate(
    new_bweight = cut_width(bweight, 1, closed = &quot;right&quot;)
  ) %&gt;%
  group_by(new_bweight) %&gt;%
  mutate(
    new_bweight_count = n(),
    VLBW              = bweight &lt; 1500,
    non_VLBW          = bweight &gt;= 1500,
    running           = bweight - 1500,
    VLBW_run          = VLBW * running,
    non_VLBW_run      = non_VLBW * running
  ) %&gt;%
  summarise(
    new_bweight_count = n(),
    new_VLBW          = sum(VLBW),
    new_non_VLBW      = sum(non_VLBW),
    new_running       = sum(running),
    new_VLBW_run      = sum(VLBW_run),
    new_non_VLBW_run  = sum(non_VLBW_run)
  )

# Run Manipulation Test Regression
lm_manip_test &lt;- lm(new_bweight_count ~ new_VLBW + new_VLBW_run + new_non_VLBW_run, data = manip.test)

stargazer(
  lm_manip_test,
  type = &quot;text&quot;, 
  out = &quot;.txt&quot;, 
  style = &quot;aer&quot;, 
  digits = 4,
  dep.var.labels = &quot;Birth Weight Counts per Bin (Gram)&quot;,
  covariate.labels = c(&quot;Birth weight &lt; 1500g&quot;, 
                       &quot;Birth weight &lt; 1500g * Grams from cutoff&quot;,
                       &quot;Birth weight &gt;= 1500g * Grams from cutoff&quot;)
)</code></pre>
<pre><code>## 
## ================================================================================
##                                             Birth Weight Counts per Bin (Gram)  
## --------------------------------------------------------------------------------
## Birth weight &lt; 1500g                                    0.9830***               
##                                                          (0.0838)               
##                                                                                 
## Birth weight &lt; 1500g * Grams from cutoff                  0.0000                
##                                                          (0.0009)               
##                                                                                 
## Birth weight &gt;= 1500g * Grams from cutoff               0.0090***               
##                                                          (0.0003)               
##                                                                                 
## Constant                                                233.4554**              
##                                                         (106.9082)              
##                                                                                 
## Observations                                               301                  
## R2                                                        0.8198                
## Adjusted R2                                               0.8180                
## Residual Std. Error                               1,789.3470 (df = 297)         
## F Statistic                                     450.4784*** (df = 3; 297)       
## --------------------------------------------------------------------------------
## Notes:                                    ***Significant at the 1 percent level.
##                                           **Significant at the 5 percent level. 
##                                           *Significant at the 10 percent level.</code></pre>
<p><br><br></p>
</div>
<div id="section-q4" class="section level3">
<h3><strong>Q4</strong></h3>
<p>Assess informally whether the behavior of other covariates is smooth around the threshold, by plotting the mean of some covariates (mother’s age, mother’s education less than high school, gestational age, prenatal care visits, and year of birth) against birth weight as you did in point (2). Is there any evidence of discontinuities on other covariates around the very low birth weight threshold? If they were, how could these affect your RDD estimates?</p>
<p><br></p>
<p><strong>Answer</strong> <br> I could not see that much jump between below and above the threshold. Particularly, gastational ages and prenatal care visits are graphically smooth. Other covariates also seem to not affect the changes between below and above the threshold. If some covariates showed significant discontinuity around the threshold, it might be highly correlated with the treatment such that our RDD estimate on the treatment effect would be biased.</p>
<pre class="r"><code># Create a plot with 1 ounce bin for mother&#39;s age (mom_age)
data %&gt;%
  mutate(
    bins = cut(bweight, 
               breaks = bin.breaks.one.oz, 
               right = FALSE, 
               dig.lab = 10)
  ) %&gt;%
  group_by(bins) %&gt;%
  summarise(
    binmean = mean(mom_age, na.rm = TRUE)
  ) %&gt;%
  mutate(
    binmids = hist(data$bweight, 
                   breaks = bin.breaks.one.oz, 
                   right = TRUE, 
                   plot = FALSE)$mids[2:13]
  ) %&gt;%
  ggplot() +
  geom_point(aes(x = binmids, y = binmean)) + 
  xlim(c(1350, 1650)) +
  ylim(c(26.1, 26.6)) +
  geom_vline(aes(xintercept = 1500), color=&quot;black&quot;) +
  xlab(&quot;Birth Weight&quot;) +
  ylab(&quot;Mother&#39;s Age&quot;)</code></pre>
<pre><code>## Warning: Removed 2 rows containing missing values (geom_point).</code></pre>
<pre class="r"><code># Create a plot with 1 ounce bin for mother&#39;s education &lt; high school (mom_ed1)
data %&gt;%
  mutate(
    bins = cut(bweight, 
               breaks = bin.breaks.one.oz, 
               right = FALSE, 
               dig.lab = 10)
  ) %&gt;%
  group_by(bins) %&gt;%
  summarise(
    binmean = mean(mom_ed1, na.rm = TRUE)
  ) %&gt;%
  mutate(
    binmids = hist(data$bweight,
                   breaks = bin.breaks.one.oz,
                   right = TRUE, 
                   plot = FALSE)$mids[2:13]
  ) %&gt;%
  ggplot() +
  geom_point(aes(x = binmids, y = binmean)) + 
  xlim(c(1350, 1650)) +
  ylim(c(0.24, 0.27)) +
  geom_vline(aes(xintercept = 1500), color=&quot;black&quot;) +
  xlab(&quot;Birth Weight&quot;) +
  ylab(&quot;Mother&#39;s Education&quot;)</code></pre>
<pre><code>## Warning: Removed 2 rows containing missing values (geom_point).</code></pre>
<pre class="r"><code># Create a plot with 1 ounce bin for gastational age (gest)
data %&gt;%
  mutate(
    bins = cut(bweight, 
               breaks = bin.breaks.one.oz, 
               right = FALSE, 
               dig.lab = 10)
  ) %&gt;%
  group_by(bins) %&gt;%
  summarise(
    binmean = mean(gest, na.rm = TRUE)
  ) %&gt;%
  mutate(
    binmids = hist(data$bweight, 
                   breaks = bin.breaks.one.oz, 
                   right = TRUE, 
                   plot = FALSE)$mids[2:13]
  ) %&gt;%
  ggplot() +
  geom_point(aes(x = binmids, y = binmean)) + 
  xlim(c(1350, 1650))  +
  ylim(c(31, 33)) +
  geom_vline(aes(xintercept = 1500), color=&quot;black&quot;) +
  xlab(&quot;Birth Weight&quot;) +
  ylab(&quot;Gastational Age&quot;)</code></pre>
<pre><code>## Warning: Removed 2 rows containing missing values (geom_point).</code></pre>
<pre class="r"><code># Create a plot with 1 ounce bin for prenatal care visits (nprenatal)
data %&gt;%
  mutate(
    bins = cut(bweight, 
               breaks = bin.breaks.one.oz, 
               right = FALSE, 
               dig.lab = 10)
  ) %&gt;%
  group_by(bins) %&gt;%
  summarise(
    binmean = mean(nprenatal, na.rm = TRUE)
  ) %&gt;%
  mutate(
    binmids = hist(data$bweight, 
                   breaks = bin.breaks.one.oz, 
                   right = TRUE, 
                   plot = FALSE)$mids[2:13]
  ) %&gt;%
  ggplot() +
  geom_point(aes(x = binmids, y = binmean)) + 
  xlim(c(1350, 1650)) +
  ylim(c(8, 9.5)) +
  geom_vline(aes(xintercept = 1500), color=&quot;black&quot;) +
  xlab(&quot;Birth Weight&quot;) +
  ylab(&quot;Prenatal-Care Visits&quot;)</code></pre>
<pre><code>## Warning: Removed 2 rows containing missing values (geom_point).</code></pre>
<pre class="r"><code># Create a plot with 1 ounce bin for year of birth (yob)
data %&gt;%
  mutate(
    bins = cut(bweight, 
               breaks = bin.breaks.one.oz, 
               right = FALSE, 
               dig.lab = 10)
  ) %&gt;%
  group_by(bins) %&gt;%
  summarise(
    binmean = mean(yob, na.rm = TRUE)
  ) %&gt;%
  mutate(
    binmids = hist(data$bweight, 
                   breaks = bin.breaks.one.oz, 
                   right = TRUE, 
                   plot = FALSE)$mids[2:13]
  ) %&gt;%
  ggplot() +
  geom_point(aes(x = binmids, y = binmean)) + 
  xlim(c(1350, 1650)) +
  ylim(c(1992, 1994)) +
  geom_vline(aes(xintercept = 1500), color=&quot;black&quot;) +
  xlab(&quot;Birth Weight&quot;) +
  ylab(&quot;Year of Birth&quot;)</code></pre>
<pre><code>## Warning: Removed 2 rows containing missing values (geom_point).</code></pre>
<p><img src="PS2-f2018_files/figure-html/unnamed-chunk-7-1.png" width="50%" /><img src="PS2-f2018_files/figure-html/unnamed-chunk-7-2.png" width="50%" /><img src="PS2-f2018_files/figure-html/unnamed-chunk-7-3.png" width="50%" /><img src="PS2-f2018_files/figure-html/unnamed-chunk-7-4.png" width="50%" /><img src="PS2-f2018_files/figure-html/unnamed-chunk-7-5.png" width="50%" /></p>
<p><br><br></p>
</div>
<div id="section-q5" class="section level3">
<h3><strong>Q5</strong></h3>
<p>Now get an estimate of the size of the discontinuity in one-‐year and 28-‐day mortality, around the 1500 grams threshold using a caliper of 85 grams (above and below the threshold). To do so, use the following model: <span class="math display">\[Y_{i} = \alpha_{0} + \alpha_{1}VLBW_{i} + \alpha_{2}VLBW_{i}(g_{i}-1500) + \alpha_{3}(1-VLBW_{i})(g_{i}-1500)+\varepsilon_{i}\]</span> where <span class="math inline">\(Y_{i}\)</span> is the outcome of interest, <span class="math inline">\(VLBW_{i}\)</span> indicates that a newborn had very low birth weight (&lt; 1500 grams), <span class="math inline">\(g_{i}\)</span> is birth weight and <span class="math inline">\(\varepsilon_{i}\)</span> a disturbance term. Interpret the coefficients <span class="math inline">\(\alpha_{1}\)</span>, <span class="math inline">\(\alpha_{2}\)</span>, and <span class="math inline">\(\alpha_{3}\)</span>.</p>
<p><br></p>
<p><strong>Answer</strong> <br> The coefficient <span class="math inline">\(\alpha_{1}\)</span> is the estimated impact of being VLBW (“Birth weight &lt; 1500g”) on the mortality rate (28-day and one-year) within the 85g caliper. The impact of being VLBW on one-year mortality is found to be -0.0095 (or 0.95 percent point reduction), while that on 28-day mortality is found to be -0.0088 (or 0.88 percent point reduction).</p>
<pre class="r"><code># Data-cleaning, using calipers of 85 grams above and below.
data.calip85 &lt;-
  data %&gt;%
  filter(bweight &gt;= 1500-85, bweight &lt;= 1500+85) %&gt;%
  mutate(
    VLBW         = bweight &lt; 1500,
    non_VLBW     = bweight &gt;= 1500,
    running      = bweight - 1500,
    VLBW_run     = VLBW * running,
    non_VLBW_run = non_VLBW * running
  )

# Regression on One-year mortality
lm_one_year &lt;- lm(agedth5 ~ VLBW + VLBW_run + non_VLBW_run, data = data.calip85)

# Regression on 28-day mortality
lm_28_day &lt;- lm(agedth4 ~ VLBW + VLBW_run + non_VLBW_run, data = data.calip85)


# Print the result
stargazer(
  lm_one_year, 
  lm_28_day, 
  type = &quot;text&quot;, 
  out = &quot;.txt&quot;, 
  style = &quot;aer&quot;, 
  digits = 4,
  dep.var.labels = c(&quot;One-Year Mortality&quot;, &quot;28-Day Mortality&quot;),
  covariate.labels = c(&quot;Birth weight &lt; 1500g&quot;, 
                       &quot;Birth weight &lt; 1500g * Grams from cutoff&quot;,
                       &quot;Birth weight &gt;= 1500g * Grams from cutoff&quot;)
)</code></pre>
<pre><code>## 
## =================================================================================
##                                            One-Year Mortality   28-Day Mortality 
##                                                   (1)                 (2)        
## ---------------------------------------------------------------------------------
## Birth weight &lt; 1500g                           -0.0095***          -0.0088***    
##                                                 (0.0022)            (0.0018)     
##                                                                                  
## Birth weight &lt; 1500g * Grams from cutoff       -0.0001***          -0.0001***    
##                                                 (0.0000)            (0.0000)     
##                                                                                  
## Birth weight &gt;= 1500g * Grams from cutoff      -0.0002***          -0.0002***    
##                                                 (0.0000)            (0.0000)     
##                                                                                  
## Constant                                       0.0632***           0.0452***     
##                                                 (0.0012)            (0.0010)     
##                                                                                  
## Observations                                    202,078             202,078      
## R2                                               0.0005              0.0005      
## Adjusted R2                                      0.0005              0.0005      
## Residual Std. Error (df = 202074)                0.2332              0.1962      
## F Statistic (df = 3; 202074)                   33.8169***          34.5125***    
## ---------------------------------------------------------------------------------
## Notes:                                    ***Significant at the 1 percent level. 
##                                           **Significant at the 5 percent level.  
##                                           *Significant at the 10 percent level.</code></pre>
<p><br><br></p>
</div>
<div id="section-q6" class="section level3">
<h3><strong>Q6</strong></h3>
<p>Now add covariates to the model in (5). Include mother’s age, indicators for mother’s education and race, indicators for year of birth, indicators for gestational age and prenatal care visits. Use the dummies provided in the data for gestational age and prenatal care visits. Compare your estimates to those obtained in (5) and explain the difference if any.</p>
<p><br></p>
<p><strong>Answer</strong> <br> First of all, by the nature of adding more covariates that might have little but still more than zero effect on the infant mortality rate, so the estimates of treatment effects from Q6 are smaller (in terms of the magnitude without sign) that those from Q5. (0.0076 &lt; 0.0095, 0.0073 &lt; 0.0088) While standard error for these estimates remain almost the same, the magnitude changed relatively signficantly meaning that some of the covariates included in Q6 regression might also have a quite large effect on the treatment outcome. Also, as the number of covariates that probably affected the outcome increased, the F Statistics became larger in Q6 than in Q5, which means that Q6 analysis became more precise and more explanatory, which was also supported by the increase in the adjusted R squared.</p>
<pre class="r"><code># Data-cleaning for next regression
data.calip85.cov &lt;-
  data.calip85 %&gt;%
  mutate(
    mom_age1 = ifelse(mom_age &gt;= 31 &amp; mom_age &lt;= 35, 1, 0),
    mom_age2 = ifelse(mom_age &gt;= 36 &amp; mom_age &lt;= 40, 1, 0),
    mom_age3 = ifelse(mom_age &gt;= 41, 1, 0),
    mom_race1 = ifelse(mom_race == &quot;black&quot;, 1, 0),
    mom_race2 = ifelse(mom_race == &quot;other&quot;, 1, 0),
    yob_dummies = factor(yob) 
  )

# Regression on One-year mortality with other covariates
lm_one_year_cov &lt;- lm(agedth5 ~ VLBW + VLBW_run + non_VLBW_run + mom_age1 + 
                      mom_age2 + mom_age3 + mom_ed2 + mom_ed3 + mom_ed4 + 
                      mom_ed5 + mom_race + yob_dummies + gest_wks1 + 
                      gest_wks2 + gest_wks3  + nprenatal_1 + nprenatal_2 + 
                      nprenatal_3, data = data.calip85.cov)


# Regression on 28-day mortality with other covariates
lm_28_day_cov &lt;- lm(agedth4 ~ VLBW + VLBW_run + non_VLBW_run + mom_age1 + 
                    mom_age2 + mom_age3 + mom_ed2 + mom_ed3 + mom_ed4 + 
                    mom_ed5 + mom_race + yob_dummies + gest_wks1 + 
                    gest_wks2 + gest_wks3  + nprenatal_1 + nprenatal_2 + 
                    nprenatal_3, data = data.calip85.cov)


# Print the result
stargazer(
  lm_28_day_cov,
  lm_one_year_cov,
  type = &quot;text&quot;,
  out = &quot;.txt&quot;,
  style = &quot;aer&quot;,
  digits = 4,
  title = &quot;Caliper of 85 grams&quot;,
  dep.var.labels = c(&quot;28-Day Mortality&quot;, &quot;One-Year Mortality&quot;),
  covariate.labels = c(&quot;Birth weight &lt; 1500g&quot;, 
                       &quot;Birth weight &lt; 1500g * Grams from cutoff&quot;,
                       &quot;Birth weight &gt;= 1500g * Grams from cutoff&quot;,
                       &quot;Mother&#39;s Age: 31-35&quot;,
                       &quot;Mother&#39;s Age: 36-40&quot;,
                       &quot;Mother&#39;s Age: 41+&quot;,
                       &quot;Mother&#39;s Education: High School&quot;,
                       &quot;Mother&#39;s Education: Some College&quot;,
                       &quot;Mother&#39;s Education: College +&quot;,
                       &quot;Mother&#39;s Education: Missing&quot;,
                       &quot;Mother&#39;s Race&quot;,
                       &quot;Year of Birth: 1984&quot;,
                       &quot;Year of Birth: 1985&quot;,
                       &quot;Year of Birth: 1986&quot;,
                       &quot;Year of Birth: 1987&quot;,
                       &quot;Year of Birth: 1988&quot;,
                       &quot;Year of Birth: 1989&quot;,
                       &quot;Year of Birth: 1990&quot;,
                       &quot;Year of Birth: 1991&quot;,
                       &quot;Year of Birth: 1995&quot;,
                       &quot;Year of Birth: 1996&quot;,
                       &quot;Year of Birth: 1997&quot;,
                       &quot;Year of Birth: 1998&quot;,
                       &quot;Year of Birth: 1999&quot;,
                       &quot;Year of Birth: 2000&quot;,
                       &quot;Year of Birth: 2001&quot;,
                       &quot;Year of Birth: 2002&quot;,
                       &quot;Gestational Age: -36 weeks&quot;,
                       &quot;Gestational Age: 37-42 weeks&quot;,
                       &quot;Gestational Age: 43+ weeks&quot;,
                       &quot;Prenatal Visits: -8 visits&quot;,
                       &quot;Prenatal Visits: 9-14 visits&quot;,
                       &quot;Prenatal Visits: 15+ visits&quot;)
)</code></pre>
<pre><code>## 
## Caliper of 85 grams
## =================================================================================
##                                            28-Day Mortality   One-Year Mortality 
##                                                   (1)                 (2)        
## ---------------------------------------------------------------------------------
## Birth weight &lt; 1500g                          -0.0073***          -0.0076***     
##                                                (0.0018)            (0.0021)      
##                                                                                  
## Birth weight &lt; 1500g * Grams from cutoff      -0.0001***          -0.0001***     
##                                                (0.0000)            (0.0000)      
##                                                                                  
## Birth weight &gt;= 1500g * Grams from cutoff     -0.0002***          -0.0002***     
##                                                (0.0000)            (0.0000)      
##                                                                                  
## Mother&#39;s Age: 31-35                             -0.0013            -0.0032**     
##                                                (0.0012)            (0.0014)      
##                                                                                  
## Mother&#39;s Age: 36-40                             -0.0002             -0.0011      
##                                                (0.0016)            (0.0019)      
##                                                                                  
## Mother&#39;s Age: 41+                              0.0071**            0.0103**      
##                                                (0.0036)            (0.0042)      
##                                                                                  
## Mother&#39;s Education: High School                0.0036***           -0.0028**     
##                                                (0.0012)            (0.0014)      
##                                                                                  
## Mother&#39;s Education: Some College                -0.0000           -0.0089***     
##                                                (0.0014)            (0.0016)      
##                                                                                  
## Mother&#39;s Education: College +                   0.0023            -0.0087***     
##                                                (0.0015)            (0.0018)      
##                                                                                  
## Mother&#39;s Education: Missing                    0.0136***           0.0102***     
##                                                (0.0019)            (0.0022)      
##                                                                                  
## Mother&#39;s Race                                 -0.0123***          -0.0098***     
##                                                (0.0008)            (0.0009)      
##                                                                                  
## Year of Birth: 1984                            -0.0053*            -0.0083**     
##                                                (0.0028)            (0.0034)      
##                                                                                  
## Year of Birth: 1985                           -0.0094***          -0.0101***     
##                                                (0.0028)            (0.0033)      
##                                                                                  
## Year of Birth: 1986                           -0.0131***          -0.0167***     
##                                                (0.0028)            (0.0033)      
##                                                                                  
## Year of Birth: 1987                           -0.0165***          -0.0216***     
##                                                (0.0027)            (0.0033)      
##                                                                                  
## Year of Birth: 1988                           -0.0151***          -0.0181***     
##                                                (0.0027)            (0.0032)      
##                                                                                  
## Year of Birth: 1989                           -0.0156***          -0.0207***     
##                                                (0.0027)            (0.0032)      
##                                                                                  
## Year of Birth: 1990                           -0.0219***          -0.0292***     
##                                                (0.0027)            (0.0032)      
##                                                                                  
## Year of Birth: 1991                           -0.0245***          -0.0306***     
##                                                (0.0027)            (0.0032)      
##                                                                                  
## Year of Birth: 1995                           -0.0334***          -0.0432***     
##                                                (0.0027)            (0.0032)      
##                                                                                  
## Year of Birth: 1996                           -0.0337***          -0.0436***     
##                                                (0.0027)            (0.0032)      
##                                                                                  
## Year of Birth: 1997                           -0.0352***          -0.0453***     
##                                                (0.0027)            (0.0032)      
##                                                                                  
## Year of Birth: 1998                           -0.0346***          -0.0463***     
##                                                (0.0027)            (0.0032)      
##                                                                                  
## Year of Birth: 1999                           -0.0328***          -0.0451***     
##                                                (0.0027)            (0.0032)      
##                                                                                  
## Year of Birth: 2000                           -0.0358***          -0.0489***     
##                                                (0.0027)            (0.0032)      
##                                                                                  
## Year of Birth: 2001                           -0.0354***          -0.0464***     
##                                                (0.0027)            (0.0032)      
##                                                                                  
## Year of Birth: 2002                           -0.0366***          -0.0481***     
##                                                (0.0026)            (0.0031)      
##                                                                                  
## Gestational Age: -36 weeks                    -0.0091***          -0.0110***     
##                                                (0.0016)            (0.0019)      
##                                                                                  
## Gestational Age: 37-42 weeks                   0.0113***           0.0167***     
##                                                (0.0022)            (0.0027)      
##                                                                                  
## Gestational Age: 43+ weeks                      -0.0035             -0.0020      
##                                                (0.0060)            (0.0072)      
##                                                                                  
## Prenatal Visits: -8 visits                      -0.0018             -0.0019      
##                                                (0.0016)            (0.0020)      
##                                                                                  
## Prenatal Visits: 9-14 visits                  -0.0082***          -0.0110***     
##                                                (0.0017)            (0.0020)      
##                                                                                  
## Prenatal Visits: 15+ visits                   -0.0133***          -0.0154***     
##                                                (0.0020)            (0.0024)      
##                                                                                  
## Constant                                       0.0954***           0.1257***     
##                                                (0.0033)            (0.0039)      
##                                                                                  
## Observations                                    202,078             202,078      
## R2                                              0.0082              0.0097       
## Adjusted R2                                     0.0081              0.0096       
## Residual Std. Error (df = 202044)               0.1954              0.2321       
## F Statistic (df = 33; 202044)                 50.7525***          60.0820***     
## ---------------------------------------------------------------------------------
## Notes:                                    ***Significant at the 1 percent level. 
##                                           **Significant at the 5 percent level.  
##                                           *Significant at the 10 percent level.</code></pre>
<p><br><br></p>
</div>
<div id="section-q7" class="section level3">
<h3><strong>Q7</strong></h3>
<p>Use the model in (6) to assess the sensitivity of the estimates to the use of different calipers. Use calipers of 30 and 120 grams (above and below the 1500 threshold). Are the estimates any different to those obtained in (6)? What is the tradeoff that we face when increasing/decreasing the caliper?</p>
<p><br></p>
<p><strong>Answer</strong> <br> With the calipler of 30g, the impact of being VLBW on the 28-day mortality rate becomes -0.0139 and that on the one-year rate becomes -0.0138, both of which are large compared to -0.0073 and -0.0076 above. As the caliper gets smaller, the estimate of impact goes larger, but the standard error also gets larger, meaning low precision due to the smaller range of sample. Indeed, the slope coefficiennt for the group below the threshold (&lt;1500g) becomes no longer statistifically significant. At the same time, however, the estimate is also less biased, showing the larger magnitude of impact.</p>
<p>On the other hand, with the calipler of 120g, the impact of being VLBW on the 28-day mortality rate becomes -0.0056 and that on the one-year rate becomes -0.0064, both of which are small compared to -0.0073 and -0.0076 above. As the caliper gets larger, the estimate of impact gets smaller, but the standard error also gets smaller. Indeed, the slope coefficient for both groups below and above the threshold becomes smaller, or “flatter.” Since the large caliper deals with a wider range of data, the slope coefficient is estimated on the more spread-out data points. In other words, as the data quantity within the caliper is large, the estimate is more precise, but at the same time, the estimated impact is also getting smaller and probably underestimated (biased).</p>
<p>This shows the tradeoff between bias and precision when the size of caliper is chosen. Larger caliper gives more precise estimate with more biased, and vice versa.</p>
<pre class="r"><code># Data-cleaning, using calipers of 30 and of 120
data.calip30 &lt;-
  data %&gt;%
  filter(bweight &gt;= 1500-30, bweight &lt;= 1500+30) %&gt;%
  mutate(
    VLBW         = bweight &lt; 1500,
    non_VLBW     = bweight &gt;= 1500,
    running      = bweight - 1500,
    VLBW_run     = VLBW * running,
    non_VLBW_run = non_VLBW * running
  )

data.calip120 &lt;-
  data %&gt;%
  filter(bweight &gt;= 1500-120, bweight &lt;= 1500+120) %&gt;%
  mutate(
    VLBW         = bweight &lt; 1500,
    non_VLBW     = bweight &gt;= 1500,
    running      = bweight - 1500,
    VLBW_run     = VLBW * running,
    non_VLBW_run = non_VLBW * running
  )


# For each data, create some dummies for next regression
data.calip30.cov &lt;-
  data.calip30 %&gt;%
  mutate(
    mom_age1 = ifelse(mom_age &gt;= 31 &amp; mom_age &lt;= 35, 1, 0),
    mom_age2 = ifelse(mom_age &gt;= 36 &amp; mom_age &lt;= 40, 1, 0),
    mom_age3 = ifelse(mom_age &gt;= 41, 1, 0),
    mom_race1 = ifelse(mom_race == &quot;black&quot;, 1, 0),
    mom_race2 = ifelse(mom_race == &quot;other&quot;, 1, 0),
    yob_dummies = factor(yob) 
  )

data.calip120.cov &lt;-
  data.calip120 %&gt;%
  mutate(
    mom_age1 = ifelse(mom_age &gt;= 31 &amp; mom_age &lt;= 35, 1, 0),
    mom_age2 = ifelse(mom_age &gt;= 36 &amp; mom_age &lt;= 40, 1, 0),
    mom_age3 = ifelse(mom_age &gt;= 41, 1, 0),
    mom_race1 = ifelse(mom_race == &quot;black&quot;, 1, 0),
    mom_race2 = ifelse(mom_race == &quot;other&quot;, 1, 0),
    yob_dummies = factor(yob) 
  )


# Regression on One-year mortality with other covariates for caliper 30
lm_one_year_cov_30 &lt;- lm(agedth5 ~ VLBW + VLBW_run + non_VLBW_run + mom_age1 + 
                      mom_age2 + mom_age3 + mom_ed2 + mom_ed3 + mom_ed4 + 
                      mom_ed5 + mom_race + yob_dummies + gest_wks1 + 
                      gest_wks2 + gest_wks3  + nprenatal_1 + nprenatal_2 + 
                      nprenatal_3, data = data.calip30.cov)


# Regression on 28-day mortality with other covariates for caliper 30
lm_28_day_cov_30 &lt;- lm(agedth4 ~ VLBW + VLBW_run + non_VLBW_run + mom_age1 + 
                    mom_age2 + mom_age3 + mom_ed2 + mom_ed3 + mom_ed4 + 
                    mom_ed5 + mom_race + yob_dummies + gest_wks1 + 
                    gest_wks2 + gest_wks3  + nprenatal_1 + nprenatal_2 + 
                    nprenatal_3, data = data.calip30.cov)


# Regression on One-year mortality with other covariates for caliper 120
lm_one_year_cov_120 &lt;- lm(agedth5 ~ VLBW + VLBW_run + non_VLBW_run + mom_age1 + 
                      mom_age2 + mom_age3 + mom_ed2 + mom_ed3 + mom_ed4 + 
                      mom_ed5 + mom_race + yob_dummies + gest_wks1 + 
                      gest_wks2 + gest_wks3  + nprenatal_1 + nprenatal_2 + 
                      nprenatal_3, data = data.calip120.cov)


# Regression on 28-day mortality with other covariates for caliper 120
lm_28_day_cov_120 &lt;- lm(agedth4 ~ VLBW + VLBW_run + non_VLBW_run + mom_age1 + 
                    mom_age2 + mom_age3 + mom_ed2 + mom_ed3 + mom_ed4 + 
                    mom_ed5 + mom_race + yob_dummies + gest_wks1 + 
                    gest_wks2 + gest_wks3  + nprenatal_1 + nprenatal_2 + 
                    nprenatal_3, data = data.calip120.cov)

# Print the result
stargazer(
  lm_28_day_cov_30,
  lm_one_year_cov_30,
  type = &quot;text&quot;,
  out = &quot;.txt&quot;,
  style = &quot;aer&quot;,
  digits = 4,
  title = &quot;Caliper of 30 grams&quot;,
  dep.var.labels = c(&quot;28-Day Mortality&quot;, &quot;One-Year Mortality&quot;),
  covariate.labels = c(&quot;Birth weight &lt; 1500g&quot;, 
                       &quot;Birth weight &lt; 1500g * Grams from cutoff&quot;,
                       &quot;Birth weight &gt;= 1500g * Grams from cutoff&quot;,
                       &quot;Mother&#39;s Age: 31-35&quot;,
                       &quot;Mother&#39;s Age: 36-40&quot;,
                       &quot;Mother&#39;s Age: 41+&quot;,
                       &quot;Mother&#39;s Education: High School&quot;,
                       &quot;Mother&#39;s Education: Some College&quot;,
                       &quot;Mother&#39;s Education: College +&quot;,
                       &quot;Mother&#39;s Education: Missing&quot;,
                       &quot;Mother&#39;s Race&quot;,
                       &quot;Year of Birth: 1984&quot;,
                       &quot;Year of Birth: 1985&quot;,
                       &quot;Year of Birth: 1986&quot;,
                       &quot;Year of Birth: 1987&quot;,
                       &quot;Year of Birth: 1988&quot;,
                       &quot;Year of Birth: 1989&quot;,
                       &quot;Year of Birth: 1990&quot;,
                       &quot;Year of Birth: 1991&quot;,
                       &quot;Year of Birth: 1995&quot;,
                       &quot;Year of Birth: 1996&quot;,
                       &quot;Year of Birth: 1997&quot;,
                       &quot;Year of Birth: 1998&quot;,
                       &quot;Year of Birth: 1999&quot;,
                       &quot;Year of Birth: 2000&quot;,
                       &quot;Year of Birth: 2001&quot;,
                       &quot;Year of Birth: 2002&quot;,
                       &quot;Gestational Age: -36 weeks&quot;,
                       &quot;Gestational Age: 37-42 weeks&quot;,
                       &quot;Gestational Age: 43+ weeks&quot;,
                       &quot;Prenatal Visits: -8 visits&quot;,
                       &quot;Prenatal Visits: 9-14 visits&quot;,
                       &quot;Prenatal Visits: 15+ visits&quot;)
)</code></pre>
<pre><code>## 
## Caliper of 30 grams
## =================================================================================
##                                            28-Day Mortality   One-Year Mortality 
##                                                   (1)                 (2)        
## ---------------------------------------------------------------------------------
## Birth weight &lt; 1500g                          -0.0139***          -0.0138***     
##                                                (0.0044)            (0.0052)      
##                                                                                  
## Birth weight &lt; 1500g * Grams from cutoff        -0.0003             -0.0002      
##                                                (0.0002)            (0.0002)      
##                                                                                  
## Birth weight &gt;= 1500g * Grams from cutoff     -0.0006***          -0.0006***     
##                                                (0.0001)            (0.0001)      
##                                                                                  
## Mother&#39;s Age: 31-35                             0.0021              0.0012       
##                                                (0.0020)            (0.0024)      
##                                                                                  
## Mother&#39;s Age: 36-40                             -0.0006             -0.0009      
##                                                (0.0028)            (0.0033)      
##                                                                                  
## Mother&#39;s Age: 41+                               0.0042              0.0060       
##                                                (0.0059)            (0.0070)      
##                                                                                  
## Mother&#39;s Education: High School                 0.0014            -0.0075***     
##                                                (0.0019)            (0.0023)      
##                                                                                  
## Mother&#39;s Education: Some College                -0.0002           -0.0108***     
##                                                (0.0023)            (0.0028)      
##                                                                                  
## Mother&#39;s Education: College +                   -0.0005           -0.0142***     
##                                                (0.0026)            (0.0030)      
##                                                                                  
## Mother&#39;s Education: Missing                    0.0124***            0.0072*      
##                                                (0.0031)            (0.0037)      
##                                                                                  
## Mother&#39;s Race                                 -0.0111***          -0.0096***     
##                                                (0.0013)            (0.0015)      
##                                                                                  
## Year of Birth: 1984                             -0.0010             -0.0025      
##                                                (0.0048)            (0.0057)      
##                                                                                  
## Year of Birth: 1985                             -0.0063             -0.0060      
##                                                (0.0047)            (0.0055)      
##                                                                                  
## Year of Birth: 1986                           -0.0200***          -0.0246***     
##                                                (0.0047)            (0.0055)      
##                                                                                  
## Year of Birth: 1987                           -0.0238***          -0.0278***     
##                                                (0.0046)            (0.0055)      
##                                                                                  
## Year of Birth: 1988                           -0.0166***          -0.0182***     
##                                                (0.0046)            (0.0055)      
##                                                                                  
## Year of Birth: 1989                           -0.0202***          -0.0223***     
##                                                (0.0046)            (0.0054)      
##                                                                                  
## Year of Birth: 1990                           -0.0200***          -0.0271***     
##                                                (0.0045)            (0.0054)      
##                                                                                  
## Year of Birth: 1991                           -0.0260***          -0.0308***     
##                                                (0.0046)            (0.0054)      
##                                                                                  
## Year of Birth: 1995                           -0.0334***          -0.0439***     
##                                                (0.0046)            (0.0054)      
##                                                                                  
## Year of Birth: 1996                           -0.0323***          -0.0391***     
##                                                (0.0046)            (0.0054)      
##                                                                                  
## Year of Birth: 1997                           -0.0338***          -0.0434***     
##                                                (0.0045)            (0.0054)      
##                                                                                  
## Year of Birth: 1998                           -0.0354***          -0.0449***     
##                                                (0.0045)            (0.0053)      
##                                                                                  
## Year of Birth: 1999                           -0.0333***          -0.0445***     
##                                                (0.0045)            (0.0053)      
##                                                                                  
## Year of Birth: 2000                           -0.0359***          -0.0483***     
##                                                (0.0045)            (0.0053)      
##                                                                                  
## Year of Birth: 2001                           -0.0349***          -0.0444***     
##                                                (0.0045)            (0.0053)      
##                                                                                  
## Year of Birth: 2002                           -0.0349***          -0.0432***     
##                                                (0.0045)            (0.0053)      
##                                                                                  
## Gestational Age: -36 weeks                    -0.0135***          -0.0167***     
##                                                (0.0027)            (0.0032)      
##                                                                                  
## Gestational Age: 37-42 weeks                    0.0044             0.0099**      
##                                                (0.0038)            (0.0045)      
##                                                                                  
## Gestational Age: 43+ weeks                      -0.0102             -0.0129      
##                                                (0.0101)            (0.0120)      
##                                                                                  
## Prenatal Visits: -8 visits                     -0.0048*            -0.0075**     
##                                                (0.0028)            (0.0033)      
##                                                                                  
## Prenatal Visits: 9-14 visits                  -0.0108***          -0.0154***     
##                                                (0.0029)            (0.0034)      
##                                                                                  
## Prenatal Visits: 15+ visits                   -0.0188***          -0.0222***     
##                                                (0.0034)            (0.0040)      
##                                                                                  
## Constant                                       0.1050***           0.1404***     
##                                                (0.0054)            (0.0064)      
##                                                                                  
## Observations                                    72,941              72,941       
## R2                                              0.0081              0.0098       
## Adjusted R2                                     0.0076              0.0094       
## Residual Std. Error (df = 72907)                0.1982              0.2344       
## F Statistic (df = 33; 72907)                  17.9801***          21.9245***     
## ---------------------------------------------------------------------------------
## Notes:                                    ***Significant at the 1 percent level. 
##                                           **Significant at the 5 percent level.  
##                                           *Significant at the 10 percent level.</code></pre>
<pre class="r"><code>stargazer(
  lm_28_day_cov_120,
  lm_one_year_cov_120,
  type = &quot;text&quot;,
  out = &quot;.txt&quot;,
  style = &quot;aer&quot;,
  digits = 4,
  title = &quot;Caliper of 120 grams&quot;,
  dep.var.labels = c(&quot;28-Day Mortality&quot;, &quot;One-Year Mortality&quot;),
  covariate.labels = c(&quot;Birth weight &lt; 1500g&quot;, 
                       &quot;Birth weight &lt; 1500g * Grams from cutoff&quot;,
                       &quot;Birth weight &gt;= 1500g * Grams from cutoff&quot;,
                       &quot;Mother&#39;s Age: 31-35&quot;,
                       &quot;Mother&#39;s Age: 36-40&quot;,
                       &quot;Mother&#39;s Age: 41+&quot;,
                       &quot;Mother&#39;s Education: High School&quot;,
                       &quot;Mother&#39;s Education: Some College&quot;,
                       &quot;Mother&#39;s Education: College +&quot;,
                       &quot;Mother&#39;s Education: Missing&quot;,
                       &quot;Mother&#39;s Race&quot;,
                       &quot;Year of Birth: 1984&quot;,
                       &quot;Year of Birth: 1985&quot;,
                       &quot;Year of Birth: 1986&quot;,
                       &quot;Year of Birth: 1987&quot;,
                       &quot;Year of Birth: 1988&quot;,
                       &quot;Year of Birth: 1989&quot;,
                       &quot;Year of Birth: 1990&quot;,
                       &quot;Year of Birth: 1991&quot;,
                       &quot;Year of Birth: 1995&quot;,
                       &quot;Year of Birth: 1996&quot;,
                       &quot;Year of Birth: 1997&quot;,
                       &quot;Year of Birth: 1998&quot;,
                       &quot;Year of Birth: 1999&quot;,
                       &quot;Year of Birth: 2000&quot;,
                       &quot;Year of Birth: 2001&quot;,
                       &quot;Year of Birth: 2002&quot;,
                       &quot;Gestational Age: -36 weeks&quot;,
                       &quot;Gestational Age: 37-42 weeks&quot;,
                       &quot;Gestational Age: 43+ weeks&quot;,
                       &quot;Prenatal Visits: -8 visits&quot;,
                       &quot;Prenatal Visits: 9-14 visits&quot;,
                       &quot;Prenatal Visits: 15+ visits&quot;)
)</code></pre>
<pre><code>## 
## Caliper of 120 grams
## =================================================================================
##                                            28-Day Mortality   One-Year Mortality 
##                                                   (1)                 (2)        
## ---------------------------------------------------------------------------------
## Birth weight &lt; 1500g                          -0.0056***          -0.0064***     
##                                                (0.0015)            (0.0018)      
##                                                                                  
## Birth weight &lt; 1500g * Grams from cutoff      -0.0001***          -0.0001***     
##                                                (0.0000)            (0.0000)      
##                                                                                  
## Birth weight &gt;= 1500g * Grams from cutoff     -0.0001***          -0.0001***     
##                                                (0.0000)            (0.0000)      
##                                                                                  
## Mother&#39;s Age: 31-35                             -0.0009           -0.0034***     
##                                                (0.0010)            (0.0011)      
##                                                                                  
## Mother&#39;s Age: 36-40                             -0.0002             -0.0014      
##                                                (0.0013)            (0.0016)      
##                                                                                  
## Mother&#39;s Age: 41+                              0.0083***           0.0119***     
##                                                (0.0029)            (0.0034)      
##                                                                                  
## Mother&#39;s Education: High School                0.0036***           -0.0028**     
##                                                (0.0009)            (0.0011)      
##                                                                                  
## Mother&#39;s Education: Some College                0.0011            -0.0075***     
##                                                (0.0011)            (0.0013)      
##                                                                                  
## Mother&#39;s Education: College +                  0.0026**           -0.0083***     
##                                                (0.0012)            (0.0015)      
##                                                                                  
## Mother&#39;s Education: Missing                    0.0126***           0.0086***     
##                                                (0.0015)            (0.0018)      
##                                                                                  
## Mother&#39;s Race                                 -0.0119***          -0.0102***     
##                                                (0.0006)            (0.0007)      
##                                                                                  
## Year of Birth: 1984                             -0.0033            -0.0051*      
##                                                (0.0023)            (0.0027)      
##                                                                                  
## Year of Birth: 1985                           -0.0100***          -0.0107***     
##                                                (0.0022)            (0.0026)      
##                                                                                  
## Year of Birth: 1986                           -0.0134***          -0.0172***     
##                                                (0.0022)            (0.0026)      
##                                                                                  
## Year of Birth: 1987                           -0.0187***          -0.0231***     
##                                                (0.0022)            (0.0026)      
##                                                                                  
## Year of Birth: 1988                           -0.0171***          -0.0206***     
##                                                (0.0022)            (0.0026)      
##                                                                                  
## Year of Birth: 1989                           -0.0152***          -0.0197***     
##                                                (0.0022)            (0.0026)      
##                                                                                  
## Year of Birth: 1990                           -0.0218***          -0.0281***     
##                                                (0.0022)            (0.0026)      
##                                                                                  
## Year of Birth: 1991                           -0.0247***          -0.0310***     
##                                                (0.0022)            (0.0026)      
##                                                                                  
## Year of Birth: 1995                           -0.0336***          -0.0426***     
##                                                (0.0022)            (0.0026)      
##                                                                                  
## Year of Birth: 1996                           -0.0346***          -0.0454***     
##                                                (0.0022)            (0.0026)      
##                                                                                  
## Year of Birth: 1997                           -0.0361***          -0.0461***     
##                                                (0.0022)            (0.0026)      
##                                                                                  
## Year of Birth: 1998                           -0.0350***          -0.0465***     
##                                                (0.0022)            (0.0026)      
##                                                                                  
## Year of Birth: 1999                           -0.0352***          -0.0473***     
##                                                (0.0021)            (0.0025)      
##                                                                                  
## Year of Birth: 2000                           -0.0354***          -0.0480***     
##                                                (0.0021)            (0.0025)      
##                                                                                  
## Year of Birth: 2001                           -0.0360***          -0.0471***     
##                                                (0.0021)            (0.0025)      
##                                                                                  
## Year of Birth: 2002                           -0.0371***          -0.0489***     
##                                                (0.0021)            (0.0025)      
##                                                                                  
## Gestational Age: -36 weeks                    -0.0094***          -0.0112***     
##                                                (0.0013)            (0.0016)      
##                                                                                  
## Gestational Age: 37-42 weeks                   0.0105***           0.0165***     
##                                                (0.0018)            (0.0021)      
##                                                                                  
## Gestational Age: 43+ weeks                      -0.0030             0.0007       
##                                                (0.0049)            (0.0058)      
##                                                                                  
## Prenatal Visits: -8 visits                     -0.0033**           -0.0031*      
##                                                (0.0013)            (0.0016)      
##                                                                                  
## Prenatal Visits: 9-14 visits                  -0.0091***          -0.0114***     
##                                                (0.0014)            (0.0017)      
##                                                                                  
## Prenatal Visits: 15+ visits                   -0.0140***          -0.0161***     
##                                                (0.0016)            (0.0019)      
##                                                                                  
## Constant                                       0.0943***           0.1254***     
##                                                (0.0027)            (0.0032)      
##                                                                                  
## Observations                                    304,636             304,636      
## R2                                              0.0084              0.0102       
## Adjusted R2                                     0.0083              0.0101       
## Residual Std. Error (df = 304602)               0.1946              0.2310       
## F Statistic (df = 33; 304602)                 77.9840***          94.7710***     
## ---------------------------------------------------------------------------------
## Notes:                                    ***Significant at the 1 percent level. 
##                                           **Significant at the 5 percent level.  
##                                           *Significant at the 10 percent level.</code></pre>
<p><br><br></p>
</div>
<div id="section-q8" class="section level3">
<h3><strong>Q8</strong></h3>
<p>Synthetize your findings and discuss what kind of supplementary information would you need to make a cost-‐benefit analysis of treatment received by newborns close to the very low birth weight threshold.</p>
<p><br></p>
<p><strong>Answer</strong> <br> According to this study, it was found that the newborns weighing from 1414.95g to 1500g have the average one-year mortality rate that is 0.76 percentage-point lower than the mortality rate of those from 1500g to 1585.05g. And from the conversation with doctors, the newborns just below 1500g got additional treatment suggesting that this treatment caused this lower mortality rate.</p>
<p>From the findings above, it is important to calculate the cost and the benefit of additional treatment provided to the newborns just below the threshold. The benefit can be calculated by the value of one baby’s life saved by the additional treatment. The cost can be the average spending on the additional treatment that the newborns with VLBW receive.</p>
<p><br></p>
<p>Name: Yoon Hong Park</p>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
